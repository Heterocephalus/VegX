<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add site observation records — addSiteObservations • VegX</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Add site observation records — addSiteObservations" />

<meta property="og:description" content="Adds site observation records to a VegX object from a data table where rows are plot observations." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">VegX</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.6.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/PackageTutorial.html">How to use the VegX R package</a>
    </li>
    <li>
      <a href="../articles/VegXStandard.html">The Veg-X exchange standard</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add site observation records</h1>
    
    <div class="hidden name"><code>addSiteObservations.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Adds site observation records to a VegX object from a data table where rows are plot observations.</p>
    
    </div>

    <pre class="usage"><span class='fu'>addSiteObservations</span>(<span class='no'>target</span>, <span class='no'>x</span>, <span class='no'>plotObservationMapping</span>,
  <span class='kw'>soilMeasurementMapping</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='kw'>climateMeasurementMapping</span> <span class='kw'>=</span> <span class='fu'>list</span>(),
  <span class='kw'>waterBodyMeasurementMapping</span> <span class='kw'>=</span> <span class='fu'>list</span>(),
  <span class='kw'>soilMeasurementMethods</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='kw'>climateMeasurementMethods</span> <span class='kw'>=</span> <span class='fu'>list</span>(),
  <span class='kw'>waterBodyMeasurementMethods</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='kw'>date.format</span> <span class='kw'>=</span> <span class='st'>"%Y-%m-%d"</span>,
  <span class='kw'>missing.values</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>NA</span>, <span class='st'>""</span>), <span class='kw'>fill.methods</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>target</th>
      <td><p>The initial object of class <code><a href='VegX-class.html'>VegX</a></code> to be modified</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>A data frame where each row corresponds to one plot observation. Columns can be varied.</p></td>
    </tr>
    <tr>
      <th>plotObservationMapping</th>
      <td><p>A list with element names 'plotName', 'obsStartDate', used to specify the mapping of data columns (specified using strings for column names) onto these variables.
Additional optional mappings are: 'subPlotName'.</p></td>
    </tr>
    <tr>
      <th>soilMeasurementMapping</th>
      <td><p>A named list used to specify the mapping of data columns to soil variables (e.g. a = "pH" to map variable "pH" of the data frame). List names should be the same as in <code>soilMeasurementMethods</code>.</p></td>
    </tr>
    <tr>
      <th>climateMeasurementMapping</th>
      <td><p>A named list used to specify the mapping of data columns to climate variables. List names should be the same as in <code>climateMeasurementMethods</code>.</p></td>
    </tr>
    <tr>
      <th>waterBodyMeasurementMapping</th>
      <td><p>A named list used to specify the mapping of data columns to water body variables. List names should be the same as in <code>waterBodyMeasurementMethods</code>.</p></td>
    </tr>
    <tr>
      <th>soilMeasurementMethods</th>
      <td><p>A named list of objects of class <code><a href='VegXMethodDefinition-class.html'>VegXMethodDefinition</a></code> with the measurement method
for each of the element names stated in <code>soilMeasurementMapping</code> (e.g. <code>list(a = pHmeth)</code> to specify the use of method '<code>pHmeth</code>' for soil1). 
Alternatively, methods can be specified using strings if predefined methods exist (e.g. <code>list(a = "pH/0-14")</code> to use the predefined method "pH/0-14"), 
see <code><a href='predefinedMeasurementMethod.html'>predefinedMeasurementMethod</a></code>.</p></td>
    </tr>
    <tr>
      <th>climateMeasurementMethods</th>
      <td><p>A named list of objects of class <code><a href='VegXMethodDefinition-class.html'>VegXMethodDefinition</a></code> with the measurement method
for each of the element names stated in <code>climateMeasurementMapping</code>. List names should be the same as climate subject measurement variables. Alternatively,
methods can be specified using strings if predefined methods exist, 
see <code><a href='predefinedMeasurementMethod.html'>predefinedMeasurementMethod</a></code>.</p></td>
    </tr>
    <tr>
      <th>waterBodyMeasurementMethods</th>
      <td><p>A named list of objects of class <code><a href='VegXMethodDefinition-class.html'>VegXMethodDefinition</a></code> with the measurement method
for each of the element names stated in <code>waterBodyMeasurementMapping</code>. List names should be the same as water body subject measurement variables. Alternatively,
methods can be specified using strings if predefined methods exist, 
see <code><a href='predefinedMeasurementMethod.html'>predefinedMeasurementMethod</a></code>.</p></td>
    </tr>
    <tr>
      <th>date.format</th>
      <td><p>A character string specifying the input format of dates (see <code>as.Date</code>).</p></td>
    </tr>
    <tr>
      <th>missing.values</th>
      <td><p>A character vector of values that should be considered as missing observations/measurements.</p></td>
    </tr>
    <tr>
      <th>fill.methods</th>
      <td><p>A flag to indicate that missing methods should be filled with dummy ones. This allows easily storing any environmental data, but without appropriate metadata.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>A boolean flag to indicate console output of the data integration process.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The modified object of class <code><a href='VegX-class.html'>VegX</a></code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Unlike in other functions, here the element names of mappings are only used to find the corresponding method. The measured subject (e.g. pH, salinity or mean annual temperature) is taken from the method definition. 
There is one exception to this rule: users can use <code>fill.methods = TRUE</code> to skip defining methods for all environmental variables. In this case, the 
function will define dummy measurement methods, taking the element name of the mapping list as subject. For example, if
<code>soilMeasurementMapping = list(pHvar = "pH")</code> and no method is provided for pHvar in <code>soilMeasurementMethods</code>, the function will create
a dummy measurement method called 'pHvar'. Although this possibility is given to ease import, users are encouraged to define
site measurement methods or to use predefined ones. When defining measurement methods, users should preferably name subjects using the same strings as in predefined methods,
because this facilitates merging datasets where the same entities have been measured. 
Please contact Veg-X developers to ask for additional predefined measurement methods if you think they are rellevant for exchanging vegetation plot data.</p>
<p>Missing value policy:</p><ul>
<li><p>Missing 'plotName' or 'obsStartDate' values are interpreted as if the previous non-missing value has to be used to define plot observation.</p></li>
<li><p>Missing 'subPlotName' values are interpreted in that observation refers to the parent plotName.</p></li>
<li><p>Missing measurements are simply not added to the Veg-X document.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Wiser SK, Spencer N, De Caceres M, Kleikamp M, Boyle B &amp; Peet RK (2011). Veg-X - an exchange standard for plot-based vegetation data</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other add functions: <code><a href='addAggregateOrganismObservations.html'>addAggregateOrganismObservations</a></code>,
  <code><a href='addCommunityObservations.html'>addCommunityObservations</a></code>,
  <code><a href='addIndividualOrganismObservations.html'>addIndividualOrganismObservations</a></code>,
  <code><a href='addPlotGeometries.html'>addPlotGeometries</a></code>,
  <code><a href='addPlotLocations.html'>addPlotLocations</a></code>,
  <code><a href='addPlotObservations.html'>addPlotObservations</a></code>,
  <code><a href='addSiteCharacteristics.html'>addSiteCharacteristics</a></code>,
  <code><a href='addStratumObservations.html'>addStratumObservations</a></code>,
  <code><a href='addSurfaceCoverObservations.html'>addSurfaceCoverObservations</a></code>,
  <code><a href='addTaxonBySiteData.html'>addTaxonBySiteData</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Load source data</span>
<span class='fu'>data</span>(<span class='no'>mokihinui</span>)

<span class='co'># Define mapping</span>
<span class='no'>mapping</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>plotName</span> <span class='kw'>=</span> <span class='st'>"Plot"</span>, <span class='kw'>subPlotName</span> <span class='kw'>=</span> <span class='st'>"Subplot"</span>,
               <span class='kw'>obsStartDate</span> <span class='kw'>=</span> <span class='st'>"PlotObsStartDate"</span>)

<span class='co'># Create new Veg-X document with site observations</span>
<span class='co'># Uses predefined measurement method "pH/0-14"</span>
<span class='no'>x</span> <span class='kw'>=</span> <span class='fu'>addSiteObservations</span>(<span class='fu'><a href='newVegX.html'>newVegX</a></span>(), <span class='no'>moki_site</span>,
                        <span class='kw'>plotObservationMapping</span> <span class='kw'>=</span> <span class='no'>mapping</span>,
                        <span class='kw'>soilMeasurementMapping</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>a</span> <span class='kw'>=</span> <span class='st'>"pH"</span>) ,
                        <span class='kw'>soilMeasurementMethods</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>a</span> <span class='kw'>=</span> <span class='st'>"pH/0-14"</span>))</div><div class='output co'>#&gt;  Measurement method 'pH/0-14' added for 'a'.
#&gt;  25 plot(s) parsed, 25 new plot(s) added.
#&gt;  25 plot observation(s) parsed, 25 new plot observation(s) added.
#&gt;  25 record(s) parsed, 25 new site observation(s) added.</div><div class='input'><span class='co'># Examine results</span>
<span class='fu'>summary</span>(<span class='no'>x</span>)</div><div class='output co'>#&gt; ================================================================
#&gt;                     Veg-X object (ver 2.0.0)                   
#&gt; ----------------------------------------------------------------
#&gt; 
#&gt;    Projects: 0
#&gt; 
#&gt;    Plots: 25  [Parent plots: 5 Sub-plots: 20]
#&gt; 
#&gt;    Individual organisms: 0
#&gt; 
#&gt;    Organism names: 0
#&gt; 
#&gt;    Taxon concepts: 0
#&gt; 
#&gt;    Organism Identities: 0
#&gt; 
#&gt;    Vegetation strata: 0
#&gt; 
#&gt;    Surface types: 0
#&gt; 
#&gt;    Parties: 0
#&gt; 
#&gt;    Literature citations: 0
#&gt; 
#&gt;    Methods: 1
#&gt;       1. pH/0-14 [pH / 1 quantitative atts.]
#&gt; 
#&gt;    Plot observations: 25  [in parent plots: 5 in sub-plots: 20]
#&gt; 
#&gt;    Individual organism observations: 0
#&gt; 
#&gt;    Aggregated organism observations: 0
#&gt; 
#&gt;    Stratum observations: 0
#&gt; 
#&gt;    Community observations: 0
#&gt; 
#&gt;    Site observations: 25
#&gt; 
#&gt;    Surface cover observations: 0
#&gt; 
#&gt; ================================================================</div><div class='input'><span class='fu'>head</span>(<span class='fu'><a href='showElementTable.html'>showElementTable</a></span>(<span class='no'>x</span>, <span class='st'>"siteObservation"</span>, <span class='kw'>subject</span><span class='kw'>=</span><span class='fl'>TRUE</span>))</div><div class='output co'>#&gt;    plotName obsStartDate soil_1_method soil_1_subject soil_1_value
#&gt; 1    LGM08r   2011-02-17       pH/0-14             pH            7
#&gt; 2 LGM08r_1Q   2011-02-17       pH/0-14             pH            7
#&gt; 3 LGM08r_2Q   2011-02-17       pH/0-14             pH            7
#&gt; 4 LGM08r_3Q   2011-02-17       pH/0-14             pH            7
#&gt; 5 LGM08r_4Q   2011-02-17       pH/0-14             pH            7
#&gt; 6    LGM16l   2011-02-15       pH/0-14             pH            7</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Miquel De Caceres.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

